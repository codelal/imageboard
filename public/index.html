<!doctype html>
<html>
<head>
    <link rel="stylesheet" href="/style.css">
<link href="https://fonts.googleapis.com/css2?family=Dosis:wght@300;400;500;600;700;800&family=M+PLUS+Rounded+1c:wght@300;400;500;700;800;900&family=Noto+Sans+JP:wght@300;400;500;700;900&family=Open+Sans+Condensed:ital,wght@0,700;1,300&family=Palanquin:wght@200;300;400&family=Unna:ital,wght@0,700;1,400;1,700&display=swap" rel="stylesheet"> 
    <title></title>
</head>
<body>
    <h1>Welcome to the Imageboard</h1>
   
     <!-- Main element has access to Vue logic -->
    <div id = "main">
        <div class ="main-input">
        <form method="POST" action="/upload" enctype="multipart/form-data">
            <input name ="title" placeholder="Title" autocomplete="off" type ="text" v-model="title">
            <input name ="description" placeholder="Image Description" autocomplete="off" type ="text" v-model="description">
            <input name ="userName" placeholder="username" autocomplete="off" type ="text" v-model="userName">
            </div>
            <div class="upload">
            <input id="inputfile"  class="inputfile" name ="file" type ="file" accept ="image/*" @change="handleFileChange">
            <label id="label" for="inputfile">Choose an Image</label>
            <button @click="handleUpload"><a href="/">Upload</a></button>
            <!--<span id ="filename">"No file choosen</span>-->
        </div>
        </form>

 <h3>Latest Images</h3>
        <div class="grid-container">
            <div class = "grid" v-for="image in images"><a :href="'#' + image.id" alt="image"> <img :src="image.url" alt="image"/></a>
                <p>{{image.title}}</p>
            </div>
            
   </form>
        </div>
          <button id="more-button" @click="showMoreImages">More</button>
          <!-- this is where I render my component (inside Main) -->
        <vue-component
            v-if="imageId"
            :image-id="imageId"
          @close="closeImage"
         ></vue-component>   
 
    </div>
       <!-- THIS IS WHERE THE CODE FOR THE COMPONENT GOES -->
      
    <script id = "template" type ="text/x-template">
        <div class ="component">
            <h2>{{title}}</h2> 
            <div class="closeX" @click="closeModal">X</div>
           <img class="clicked-image" :src="url"/>
            <comments-component
                 :image-id="imageId"
           ></comments-component">
           <div class="img-description">
             <p>{{createdAt}}</p>
            <p>{{username}}</p>
            <p>{{description}}</p>
           </div>
          
           
        </div>    
    </script>
    
 <script id = "childTemplate" type ="text/x-template">
        <div class ="comments-component">
              <form method="POST" action="/upload" enctype="multipart/form-data">
            <input name ="name" placeholder="name"type ="text" v-model="name">
           <input name ="comment" placeholder="comment"type ="text" v-model="comment">
            <button @click="postComments">Post Comment</button>
        </form>
      <div v-for="comment in comments">
                <p class ="single-comment">{{comment.name}} {{comment.comment}} {{comment.created_at}}</p>
      </div>
        </div>    
    </script>


    <script src="/js/vue.js"></script>
    <script src="/js/axios.min.js"></script>
     <script src="/js/script.js"></script>
</body>
</html>
